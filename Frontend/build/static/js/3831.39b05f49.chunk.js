"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[3831,5996,1238],{35996:function(e,t,n){n.r(t);var i=n(74165),s=n(15861),r=n(29439),a=n(98129),c=n(47646),l=n(24291),d=n(20281),o=n(75410),u=n(44086),x=n(32001),m=n(72791),f=n(51468),p=n(80184);t.default=function(e){var t=e.open,n=e.setOpen,h=e.groupDetails,v=e.handleSubmit,g=e.addingParticipants,j=(0,u.Z)(),Z=(0,r.Z)(j,1)[0],w=(0,m.useState)([]),_=(0,r.Z)(w,2),y=_[0],b=_[1],N=function(){var e=(0,s.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getAvailableUsersForGroup(h._id);case 2:(t=e.sent).success&&b(t.data.users);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,m.useEffect)((function(){return N(),function(){Z.resetFields()}}),[]),(0,p.jsx)(a.Z,{open:t,onCancel:function(){n(!1)},onOk:function(){Z.submit()},title:"Add Participants",okButtonProps:{title:"Submit",type:"primary",loading:g,disabled:g},children:(0,p.jsx)(c.Z,{children:(0,p.jsx)(l.Z,{form:Z,onFinish:v,onFinishFailed:function(){},children:(0,p.jsxs)("div",{children:[(0,p.jsx)(d.Z,{children:(0,p.jsx)(d.Z.Item,{label:"Name",children:h.title})}),(0,p.jsx)("label",{children:"Select Participants"}),(0,p.jsx)(x.Z,{name:"participants",rules:[{required:!0,message:"Select atleast one participant to add!"}],children:(0,p.jsx)(o.Z,{mode:"multiple",children:y.map((function(e){return(0,p.jsx)(o.Z.Option,{value:e._id,children:e.name},e._id)}))})})]})})})})}},83831:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var i=n(1413),s=n(93433),r=n(74165),a=n(15861),c=n(29439),l=n(87462),d=n(72791),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"},u=n(54291),x=function(e,t){return d.createElement(u.Z,(0,l.Z)({},e,{ref:t,icon:o}))};var m=d.forwardRef(x),f=n(16859),p=n(2641),h=n(20043),v=n(86215),g=n(47646),j=n(75308),Z=n(61994),w=n(24253),_=n(7477),y=n(23853),b=n(5796),N=n(96136),S=n(95364),k=n(51468),C=n(76421),z=n(81238),D=n(16856),F=n(35996),M=n(80184),P=function(e){var t,n,l,o=e.selectedGroup,u=e.setSelectedGroup,x=localStorage.getItem("loggedInUser")?JSON.parse(localStorage.getItem("loggedInUser")):null,P=(0,d.useRef)(),U=(0,d.useState)([]),I=(0,c.Z)(U,2),L=I[0],G=I[1],T=(0,d.useContext)(S.SocketContext).socket,H=(0,d.useContext)(N.ChatContext).messageInfo,R=(0,d.useState)(""),A=(0,c.Z)(R,2),E=A[0],O=A[1],B=(0,d.useState)(!1),V=(0,c.Z)(B,2),q=V[0],K=V[1],J=(0,d.useState)(),W=(0,c.Z)(J,2),Q=W[0],X=W[1],Y=(0,d.useState)(!1),$=(0,c.Z)(Y,2),ee=$[0],te=$[1],ne=(0,d.useState)(!1),ie=(0,c.Z)(ne,2),se=ie[0],re=ie[1],ae=(0,d.useState)(!1),ce=(0,c.Z)(ae,2),le=ce[0],de=ce[1],oe=(0,d.useState)(!1),ue=(0,c.Z)(oe,2),xe=ue[0],me=ue[1],fe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.next=3,k.default.getGroupChats(t);case 3:(n=e.sent).statusCode===_.WE.Ok&&G(n.data),K(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){var n,i,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.file,i=t.onSuccess,s=t.onError,re(!0);try{X(n),i()}catch(r){s(r)}re(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Q){e.next=8;break}return(t=new FormData).append("file",Q),e.next=5,k.default.uploadImage(t);case 5:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",n.data.uploadedFileUrl);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t,n){var a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(""),e.next=3,he();case 3:a=e.sent,G((function(e){return[].concat((0,s.Z)(e),[(0,i.Z)((0,i.Z)({},a&&{message_type:"file",file_url:a}),{},{message:n,sent_from:x._id,__v:0,date:(new Date).toString(),_id:Math.random().toString(),isReaded:!1,sent_to:t,group_id:o._id,chatType:"Group"})])})),a&&X(void 0),T.mySocket.emit("personalMessage",(0,i.Z)((0,i.Z)({message:n},a&&{message_type:"file",file_url:a}),{},{sent_to:t,group_id:o._id,chatType:"Group"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){o&&fe(o._id)}),[o]),(0,d.useEffect)((function(){var e;H&&H.group_id&&(null===(e=H.group_id)||void 0===e?void 0:e.toString())===o._id&&G((function(e){return[].concat((0,s.Z)(e),[(0,i.Z)((0,i.Z)({},(null===H||void 0===H?void 0:H.file_url)&&{message_type:"file",file_url:H.file_url}),{},{message:null===H||void 0===H?void 0:H.message,sent_from:H.sentBy.id,__v:0,date:(new Date).toString(),_id:Math.random().toString(),isReaded:!0,sent_to:x._id,group_id:H.group_id,chatType:"Group"})])}))}),[H]),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"bg-[#00A038] rounded-xl py-4",children:(0,M.jsxs)("div",{className:"flex justify-between px-6",children:[(0,M.jsxs)("div",{className:"text-white flex gap-4 items-center",children:[(0,M.jsx)(f.C,{size:"large",src:(0,M.jsx)(m,{})}),(0,M.jsx)("p",{className:"font-semibold",children:null===o||void 0===o?void 0:o.name})]}),(0,M.jsx)("div",{children:(0,M.jsx)(p.ZP,{onClick:function(){return u(null)},type:"primary",className:"text-white mt-2 text-base font-medium",children:"Go Back"})})]})}),(0,M.jsx)("div",{children:(0,M.jsxs)(h.Z,{spinning:se,children:[q?(0,M.jsx)(b.default,{}):(0,M.jsxs)("div",{className:"shadow-2xl dark:shadow bg-white  mt-6   dark: dark:bg-navy-900 overflow-y-auto overflow-x-hidden ",children:[(null===(t=o.userDetails)||void 0===t?void 0:t.some((function(e){if(e.id._id===x._id&&e.is_admin)return!0})))&&(0,M.jsxs)("div",{className:"flex justify-between m-4",children:[(0,M.jsx)("div",{}),(0,M.jsx)(p.ZP,{onClick:function(){de(!0)},type:"primary",className:"text-white mt-2 text-base font-medium",children:"+ Add Participant"})]}),(0,M.jsx)("div",{className:"flex justify-center mt-2 py-4",children:(0,M.jsx)("p",{className:"text-center text-white bg-[#00A038] px-10 rounded-2xl  ",children:(null===L||void 0===L||null===(n=L[0])||void 0===n?void 0:n.date)&&(0,z.formatDate)(null===L||void 0===L||null===(l=L[0])||void 0===l?void 0:l.date)})}),(0,M.jsx)("div",{className:"overflow-y-auto max-h-[500px]",style:{minHeight:"49vh"},children:L&&L.length>0?L.map((function(e){var t,n;return(null===e||void 0===e||null===(t=e.sent_from)||void 0===t||null===(n=t._id)||void 0===n?void 0:n.toString())!==x._id.toString()?e.file_url?(0,M.jsx)("div",{className:"flex mb-3 px-3",children:(0,M.jsxs)("div",{className:"bg-[#00A038] p-4 rounded-xl text-white flex flex-col gap-3",children:[(0,M.jsx)(v.Z,{src:e.file_url,width:200,height:200}),(0,M.jsxs)("div",{children:[" ",e.message]}),(0,M.jsx)("div",{className:"text-end",children:(0,M.jsx)("p",{className:"text-gray-800 text-xs",children:(0,z.formatTime)(e.date)})})]})},e._id):(0,M.jsx)("div",{className:"flex mb-3 px-6",children:(0,M.jsx)("div",{className:"bg-[#00A038] px-6 py-1 rounded-xl text-white flex flex-col gap-4",children:(0,M.jsxs)("div",{children:[" ",e.message," ",(0,M.jsx)("div",{className:"text-end",children:(0,M.jsx)("p",{className:"text-gray-800 text-xs",children:(0,z.formatTime)(e.date)})})]})})},e._id):e.file_url?(0,M.jsxs)("div",{className:"flex justify-between mb-3 px-3 ",children:[(0,M.jsx)("div",{}),(0,M.jsxs)("div",{className:"bg-brandLinear text-white p-4 rounded-xl flex flex-col gap-3",children:[(0,M.jsx)(v.Z,{src:e.file_url,width:200,height:200}),(0,M.jsxs)("div",{children:[e.message,(0,M.jsx)("div",{className:"text-end",children:(0,M.jsx)("p",{className:"text-gray-800 text-xs",children:(0,z.formatTime)(e.date)})})]})]})]},e._id):(0,M.jsxs)("div",{className:"flex justify-between px-3 py-1 mb-3 ",children:[(0,M.jsx)("div",{}),(0,M.jsx)("div",{className:"text-black shadow-xl bg-brandLinear text-white px-6 rounded-xl",children:e.message&&(0,M.jsxs)(M.Fragment,{children:[e.message,(0,M.jsx)("div",{className:"text-end",children:(0,M.jsx)("p",{className:"text-gray-800 text-xs",children:(0,z.formatTime)(e.date)})})]})})]},e._id)})):(0,M.jsx)("div",{className:"text-center mt-10 text-xl  dark:text-white font-medium pb-4",children:(0,M.jsx)("p",{children:"No Chats Found"})})}),(0,M.jsx)(C.ZP,{open:ee,className:"m-10",onEmojiClick:function(e){O((function(t){return t+e.emoji}))}}),Q&&(0,M.jsx)(g.Z,{title:(0,M.jsxs)("div",{className:"flex justify-between align-middle",children:[(0,M.jsx)("div",{children:"Seletecd Media"})," ",(0,M.jsx)(D.FU5,{className:"border  cursor-pointer",size:"25px",onClick:function(){X(void 0)}})]}),className:"mt-5 mx-5 shadow-2xl",children:(0,M.jsx)("div",{children:(0,M.jsx)(v.Z,{src:URL.createObjectURL(Q),width:100,height:100})})})]}),(0,M.jsx)(j.Z,{prefix:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Z.Z,{id:"file",ref:P,accept:"image/*",showUploadList:!1,customRequest:pe,style:{display:"none"},multiple:!1,children:(0,M.jsx)(y.UH,{className:"cursor-pointer"})}),(0,M.jsx)(y.jMy,{onClick:function(){te(!ee)},className:"cursor-pointer"})]}),value:E,onKeyDown:function(e){"escape"===e.code.toLowerCase()&&te(!1),"enter"!==e.code.toLowerCase()||e.shiftKey||(E||Q)&&ve(o._id,E)},onChange:function(e){return O(e.target.value)},placeholder:"Type here . . . . .",suffix:(0,M.jsx)(y.LbG,{onClick:function(){return(E||Q)&&ve(o._id,E)},className:"cursor-pointer"}),size:"large",className:"rounded-none w-full"})]})}),le&&(0,M.jsx)(F.default,{open:le,setOpen:function(e){de(e)},groupDetails:o,handleSubmit:function(){var e=(0,a.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return me(!0),e.next=3,k.default.addParticipant({group_id:o._id,participants:t.participants});case 3:e.sent.success&&w.Z.success({message:"Participants added in the group"}),me(!1),de(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addingParticipants:xe})]})})}},81238:function(e,t,n){function i(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function s(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:200)/Math.max(e,t);return{width:Math.ceil(e*n),height:Math.ceil(t*n)}}function r(e,t){var n=new Image;n.onload=function(){var e=n.width,i=n.height;t(e,i)},n.src=e}function a(e){var t=new Date(e).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}).split(" ");return t[4]+" "+t[5]}n.r(t),n.d(t,{formatDate:function(){return i},formatTime:function(){return a},getImageDimensions:function(){return r},scaleImageRatio:function(){return s}})}}]);
//# sourceMappingURL=3831.39b05f49.chunk.js.map