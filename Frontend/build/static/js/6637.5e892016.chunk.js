"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[6637,3189,1593,7748,3831,1238],{13189:function(e,t,n){n.r(t);var s=n(16856),r=n(80184);t.default=function(){return(0,r.jsx)("div",{className:"text-black flex justify-center items-center mt-44",children:(0,r.jsxs)("div",{className:"text-center",children:[" ",(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(s.POW,{className:"text-7xl text-green-500"})}),(0,r.jsx)("h1",{className:"text-3xl text-center dark:text-white",children:"Free Chat With Users"})]})})}},4257:function(e,t,n){n.r(t);var s=n(29439),r=n(2641),i=n(47646),a=n(66106),c=n(30914),l=n(72791),d=n(31593),o=n(80184);t.default=function(e){var t=e.sideBarChatChild,n=e.chatAreaChild,u=(0,l.useState)(!1),x=(0,s.Z)(u,2),f=x[0],m=x[1];return(0,o.jsxs)("div",{children:[(0,o.jsx)(r.ZP,{type:"primary",className:"m-4",onClick:function(){m(!0)},children:"Create Group"}),(0,o.jsx)(i.Z,{style:{height:"75vh"},className:"  dark:!bg-navy-800",children:(0,o.jsxs)(a.Z,{children:[(0,o.jsx)(c.Z,{md:8,xl:8,children:(0,o.jsx)("div",{style:{height:"66vh"},className:"shadow-3xl overflow-y-auto   rounded-md",children:t})}),(0,o.jsx)(c.Z,{md:16,xl:16,className:"p-2 ",children:n})]})}),f&&(0,o.jsx)(d.default,{open:f,setOpen:m})]})}},31593:function(e,t,n){n.r(t);var s=n(29439),r=n(98129),i=n(47646),a=n(24291),c=n(75308),l=n(75410),d=n(44086),o=n(32001),u=n(72791),x=n(80184);t.default=function(e){var t=e.open,n=e.setOpen,f=(0,d.Z)(),m=(0,s.Z)(f,1)[0];return(0,u.useEffect)((function(){return console.log("hi"),function(){console.log("bye"),m.resetFields()}}),[]),(0,x.jsx)(r.Z,{open:t,onCancel:function(){n(!1)},onOk:function(){m.submit()},title:"Create Group",okButtonProps:{title:"Submit",type:"primary"},children:(0,x.jsx)(i.Z,{children:(0,x.jsx)(a.Z,{form:m,onFinish:function(){},onFinishFailed:function(e){console.log(e,"error")},children:(0,x.jsxs)("div",{children:[(0,x.jsx)("label",{children:"Name"}),(0,x.jsx)(o.Z,{name:"name",required:!0,children:(0,x.jsx)(c.Z,{})}),(0,x.jsx)("label",{children:"About"}),(0,x.jsx)(o.Z,{name:"about",required:!0,children:(0,x.jsx)(c.Z,{})}),(0,x.jsx)("label",{children:"Select members"}),(0,x.jsx)(o.Z,{name:"members",children:(0,x.jsxs)(l.Z,{mode:"multiple",children:[(0,x.jsx)(l.Z.Option,{value:1,children:"User 1"},1),(0,x.jsx)(l.Z.Option,{value:2,children:"User 2"},2)]})})]})})})})}},83831:function(e,t,n){n.r(t),n.d(t,{default:function(){return U}});var s=n(1413),r=n(93433),i=n(74165),a=n(15861),c=n(29439),l=n(87462),d=n(72791),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M912 820.1V203.9c28-9.9 48-36.6 48-67.9 0-39.8-32.2-72-72-72-31.3 0-58 20-67.9 48H203.9C194 84 167.3 64 136 64c-39.8 0-72 32.2-72 72 0 31.3 20 58 48 67.9v616.2C84 830 64 856.7 64 888c0 39.8 32.2 72 72 72 31.3 0 58-20 67.9-48h616.2c9.9 28 36.6 48 67.9 48 39.8 0 72-32.2 72-72 0-31.3-20-58-48-67.9zM888 112c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24zM136 912c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm0-752c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24zm704 680H184V184h656v656zm48 72c-13.3 0-24-10.7-24-24s10.7-24 24-24 24 10.7 24 24-10.7 24-24 24z"}},{tag:"path",attrs:{d:"M288 474h448c8.8 0 16-7.2 16-16V282c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64zm-56 420h448c8.8 0 16-7.2 16-16V566c0-8.8-7.2-16-16-16H288c-8.8 0-16 7.2-16 16v176c0 8.8 7.2 16 16 16zm56-136h336v64H344v-64z"}}]},name:"group",theme:"outlined"},u=n(54291),x=function(e,t){return d.createElement(u.Z,(0,l.Z)({},e,{ref:t,icon:o}))};var f=d.forwardRef(x),m=n(46379),h=n(2641),p=n(20043),v=n(86215),j=n(47646),g=n(75308),Z=n(61994),y=n(7477),w=n(23853),N=n(5796),b=n(96136),k=n(95364),_=n(51468),C=n(76421),S=n(81238),z=n(16856),M=n(80184),U=function(e){var t,n=e.selectedGroup,l=e.setSelectedGroup,o=localStorage.getItem("loggedInUser")?JSON.parse(localStorage.getItem("loggedInUser")):null,u=(0,d.useRef)(),x=(0,d.useState)([]),U=(0,c.Z)(x,2),E=U[0],F=U[1],I=(0,d.useContext)(k.SocketContext).socket,D=(0,d.useContext)(b.ChatContext).messageInfo,L=(0,d.useState)(""),O=(0,c.Z)(L,2),G=O[0],T=O[1],A=(0,d.useState)(!1),B=(0,c.Z)(A,2),H=B[0],P=B[1],R=(0,d.useState)(),V=(0,c.Z)(R,2),W=V[0],q=V[1],K=(0,d.useState)(!1),J=(0,c.Z)(K,2),Q=J[0],X=J[1],Y=(0,d.useState)(!1),$=(0,c.Z)(Y,2),ee=$[0],te=$[1],ne=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.next=3,_.default.getChats(t);case 3:(n=e.sent).statusCode===y.WE.Ok&&F(n.data),P(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t){var n,s,r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.file,s=t.onSuccess,r=t.onError,te(!0);try{q(n),s()}catch(i){r(i)}te(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=8;break}return(t=new FormData).append("file",W),e.next=5,_.default.uploadImage(t);case 5:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",n.data.uploadedFileUrl);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e=(0,a.Z)((0,i.Z)().mark((function e(t,n){var a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(""),e.next=3,re();case 3:a=e.sent,F((function(e){return[].concat((0,r.Z)(e),[(0,s.Z)((0,s.Z)({},a&&{message_type:"file",file_url:a}),{},{message:n,sent_from:o._id,__v:0,date:(new Date).toString(),_id:Math.random().toString(),isReaded:!1,sent_to:t,chatType:"Personal"})])})),a&&q(void 0),I.mySocket.emit("personalMessage",(0,s.Z)((0,s.Z)({message:n},a&&{message_type:"file",file_url:a}),{},{sent_to:t,chatType:"Personal"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,d.useEffect)((function(){n&&ne(n._id)}),[n]),(0,d.useEffect)((function(){D.message&&D.sentBy.id.toString()===n._id&&F((function(e){return[].concat((0,r.Z)(e),[(0,s.Z)((0,s.Z)({},(null===D||void 0===D?void 0:D.file_url)&&{message_type:"file",file_url:D.file_url}),{},{message:null===D||void 0===D?void 0:D.message,sent_from:D.sentBy.id,__v:0,date:(new Date).toString(),_id:Math.random().toString(),isReaded:!0,sent_to:o._id,chatType:"Personal"})])}))}),[D.message]),(0,M.jsx)(M.Fragment,{children:(0,M.jsxs)("div",{children:[(0,M.jsx)("div",{className:"bg-[#00A038] rounded-xl py-4",children:(0,M.jsxs)("div",{className:"flex justify-between px-6",children:[(0,M.jsxs)("div",{className:"text-white flex gap-4 items-center",children:[(0,M.jsx)(m.C,{size:"large",src:(0,M.jsx)(f,{})}),(0,M.jsx)("p",{className:"font-semibold",children:null===n||void 0===n?void 0:n.name})]}),(0,M.jsx)("div",{children:(0,M.jsx)(h.ZP,{onClick:function(){return l(null)},type:"primary",className:"text-white mt-2 text-base font-medium",children:"Go Back"})})]})}),(0,M.jsx)("div",{children:(0,M.jsxs)(p.Z,{spinning:ee,children:[H?(0,M.jsx)(N.default,{}):(0,M.jsxs)("div",{className:"shadow-3xl dark:shadow bg-white  mt-6   dark: dark:bg-navy-900 overflow-y-auto overflow-x-hidden ",children:[(0,M.jsx)("div",{className:"flex justify-center mt-2 py-4",children:(0,M.jsx)("p",{className:"text-center text-white bg-[#00A038] px-10 rounded-2xl  ",children:(0,S.formatDate)(null===E||void 0===E||null===(t=E[0])||void 0===t?void 0:t.date)})}),(0,M.jsx)("div",{className:"overflow-y-auto max-h-[500px]",style:{minHeight:"49vh"},children:E&&E.length>0?E.map((function(e){return e.sent_from.toString()!==o._id.toString()?e.file_url?(0,M.jsx)("div",{className:"flex mb-3 px-3",children:(0,M.jsxs)("div",{className:"bg-[#00A038] p-4 rounded-xl text-white flex flex-col gap-3",children:[(0,M.jsx)(v.Z,{src:e.file_url,width:200,height:200}),(0,M.jsxs)("div",{children:[" ",e.message]}),(0,M.jsx)("div",{className:"text-end",children:(0,M.jsx)("p",{className:"text-gray-800 text-xs",children:(0,S.formatTime)(e.date)})})]})},e._id):(0,M.jsx)("div",{className:"flex mb-3 px-6",children:(0,M.jsx)("div",{className:"bg-[#00A038] px-6 py-1 rounded-xl text-white flex flex-col gap-4",children:(0,M.jsxs)("div",{children:[" ",e.message," ",(0,M.jsx)("div",{className:"text-end",children:(0,M.jsx)("p",{className:"text-gray-800 text-xs",children:(0,S.formatTime)(e.date)})})]})})},e._id):e.file_url?(0,M.jsxs)("div",{className:"flex justify-between mb-3 px-3 ",children:[(0,M.jsx)("div",{}),(0,M.jsxs)("div",{className:"bg-brandLinear text-white p-4 rounded-xl flex flex-col gap-3",children:[(0,M.jsx)(v.Z,{src:e.file_url,width:200,height:200}),(0,M.jsxs)("div",{children:[e.message,(0,M.jsx)("div",{className:"text-end",children:(0,M.jsx)("p",{className:"text-gray-800 text-xs",children:(0,S.formatTime)(e.date)})})]})]})]},e._id):(0,M.jsxs)("div",{className:"flex justify-between px-3 py-1 mb-3 ",children:[(0,M.jsx)("div",{}),(0,M.jsx)("div",{className:"text-black shadow-xl bg-brandLinear text-white px-6 rounded-xl",children:e.message&&(0,M.jsxs)(M.Fragment,{children:[e.message,(0,M.jsx)("div",{className:"text-end",children:(0,M.jsx)("p",{className:"text-gray-800 text-xs",children:(0,S.formatTime)(e.date)})})]})})]},e._id)})):(0,M.jsx)("div",{className:"text-center mt-10 text-xl  dark:text-white font-medium pb-4",children:(0,M.jsx)("p",{children:"No Chats Found"})})}),(0,M.jsx)(C.ZP,{open:Q,className:"m-10",onEmojiClick:function(e){T((function(t){return t+e.emoji}))}}),W&&(0,M.jsx)(j.Z,{title:(0,M.jsxs)("div",{className:"flex justify-between align-middle",children:[(0,M.jsx)("div",{children:"Seletecd Media"})," ",(0,M.jsx)(z.FU5,{className:"border  cursor-pointer",size:"25px",onClick:function(){q(void 0)}})]}),className:"mt-5 mx-5 shadow-2xl",children:(0,M.jsx)("div",{children:(0,M.jsx)(v.Z,{src:URL.createObjectURL(W),width:100,height:100})})})]}),(0,M.jsx)(g.Z,{prefix:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Z.Z,{id:"file",ref:u,accept:"image/*",showUploadList:!1,customRequest:se,style:{display:"none"},multiple:!1,children:(0,M.jsx)(w.UH,{className:"cursor-pointer"})}),(0,M.jsx)(w.jMy,{onClick:function(){X(!Q)},className:"cursor-pointer"})]}),value:G,onKeyDown:function(e){"escape"===e.code.toLowerCase()&&X(!1),"enter"!==e.code.toLowerCase()||e.shiftKey||(G||W)&&ie(n._id,G)},onChange:function(e){return T(e.target.value)},placeholder:"Type here . . . . .",suffix:(0,M.jsx)(w.LbG,{onClick:function(){return(G||W)&&ie(n._id,G)},className:"cursor-pointer"}),size:"large",className:"rounded-none w-full"})]})})]})})}},17748:function(e,t,n){n.r(t);var s=n(93433),r=n(74165),i=n(1413),a=n(15861),c=n(29439),l=n(29529),d=n(51678),o=n(46379),u=n(7477),x=n(72791),f=n(5796),m=n(96136),h=n(95364),p=n(51468),v=n(4257),j=n(83831),g=n(13189),Z=n(80184);t.default=function(){var e=(0,x.useState)([]),t=(0,c.Z)(e,2),n=t[0],y=t[1],w=(0,x.useState)(null),N=(0,c.Z)(w,2),b=N[0],k=N[1],_=(0,x.useContext)(m.ChatContext).messageInfo,C=(0,x.useContext)(h.SocketContext).socket,S=(0,x.useState)(!1),z=(0,c.Z)(S,2),M=z[0],U=z[1],E=function(){var e=(0,a.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,p.default.getMygroups();case 3:t=e.sent,console.log(t,"response"),t.statusCode===u.WE.Ok&&y(t.data.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isSelected:!1})}))),U(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.useEffect)((function(){E()}),[]),(0,x.useEffect)((function(){if(_.message){var e=n.find((function(e){return e._id.toString()===_.sentBy.id.toString()}));console.log(e,"foundGroupExists"),y((function(e){return(0,s.Z)(e)}))}}),[_]),(0,x.useEffect)((function(){var e;b&&(C.mySocket.emit("startChat",{id:null===(e=C.user)||void 0===e?void 0:e._id,userId:b._id}),y((function(e){return e.map((function(e){return e._id===b._id&&(e=(0,i.Z)((0,i.Z)({},e),{},{unreadMessages:0})),e}))})))}),[b]),(0,Z.jsx)("div",{children:M?(0,Z.jsx)(f.default,{}):b?b&&(0,Z.jsx)(j.default,{setSelectedGroup:k,selectedGroup:b}):(0,Z.jsx)(v.default,{sideBarChatChild:n&&(0,Z.jsx)("div",{className:"py-3",children:null===n||void 0===n?void 0:n.map((function(e){var t;return(0,Z.jsx)("div",{className:"px-2 mt-1 ",children:(0,Z.jsx)("div",{className:"".concat(e.isSelected?"bg-[#00A038] rounded-2xl  text-white w-full":""," dark:text-white px-4"),children:(0,Z.jsx)(d.Z,{size:"small",count:e.unreadMessages,children:(0,Z.jsxs)("div",{onClick:function(){k(e)},className:"flex cursor-pointer items-center gap-4  p-2 ",children:[(0,Z.jsx)(o.C,{size:"large",src:(0,Z.jsx)(l.Z,{className:"".concat(e.isSelected?"text-white":"text-[black]"," dark:text-white")})}),(0,Z.jsx)("div",{className:"text-lg  ".concat(e.isSelected?"text-white":"text-black"," dark:text-white"),children:(null===(t=e.name)||void 0===t?void 0:t.length)>12?e.name.slice(0,12)+"...":e.name})]})})})})}))}),chatAreaChild:(0,Z.jsx)(g.default,{})})})}},46637:function(e,t,n){n.r(t);n(72791);var s=n(17748),r=n(80184);t.default=function(){return(0,r.jsx)("div",{children:(0,r.jsx)(s.default,{})})}},81238:function(e,t,n){function s(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function r(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:200)/Math.max(e,t);return{width:Math.ceil(e*n),height:Math.ceil(t*n)}}function i(e,t){var n=new Image;n.onload=function(){var e=n.width,s=n.height;t(e,s)},n.src=e}function a(e){var t=new Date(e).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}).split(" ");return t[4]+" "+t[5]}n.r(t),n.d(t,{formatDate:function(){return s},formatTime:function(){return a},getImageDimensions:function(){return i},scaleImageRatio:function(){return r}})}}]);
//# sourceMappingURL=6637.5e892016.chunk.js.map