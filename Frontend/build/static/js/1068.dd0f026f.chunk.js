"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[1068,3189,493,1238],{13189:function(e,t,n){n.r(t);var s=n(16856),a=n(80184);t.default=function(){return(0,a.jsx)("div",{className:"text-black flex justify-center items-center mt-44",children:(0,a.jsxs)("div",{className:"text-center",children:[" ",(0,a.jsx)("div",{className:"flex justify-center",children:(0,a.jsx)(s.POW,{className:"text-7xl text-green-500"})}),(0,a.jsx)("h1",{className:"text-3xl text-center dark:text-white",children:"Free Chat With Users"})]})})}},5678:function(e,t,n){n.r(t);var s=n(47646),a=n(66106),i=n(30914),r=(n(72791),n(80184));t.default=function(e){var t=e.sideBarChatChild,n=e.chatAreaChild;return(0,r.jsx)("div",{children:(0,r.jsx)(s.Z,{style:{height:"75vh"},className:"  dark:!bg-navy-800",children:(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(i.Z,{md:8,xl:8,children:(0,r.jsx)("div",{style:{height:"66vh"},className:"shadow-2xl overflow-y-auto   rounded-md",children:t})}),(0,r.jsx)(i.Z,{md:16,xl:16,className:"p-2 ",children:n})]})})})}},91068:function(e,t,n){n.r(t);n(72791);var s=n(60493),a=n(80184);t.default=function(){return(0,a.jsx)("div",{children:(0,a.jsx)(s.default,{})})}},14423:function(e,t,n){n.r(t);var s=n(1413),a=n(93433),i=n(74165),r=n(15861),l=n(29439),c=n(29529),d=n(16859),o=n(2641),u=n(20043),x=n(86215),f=n(47646),m=n(75308),h=n(61994),v=n(7477),p=n(72791),g=n(23853),j=n(5796),w=n(96136),y=n(95364),Z=n(51468),N=n(76421),_=n(81238),S=n(16856),k=n(80184);t.default=function(e){var t,n,b=e.selectedUser,C=e.setSelectedUser,U=localStorage.getItem("loggedInUser")?JSON.parse(localStorage.getItem("loggedInUser")):null,M=(0,p.useRef)(),D=(0,p.useState)([]),R=(0,l.Z)(D,2),I=R[0],L=R[1],B=(0,p.useContext)(y.SocketContext).socket,E=(0,p.useContext)(w.ChatContext).messageInfo,T=(0,p.useState)(""),A=(0,l.Z)(T,2),F=A[0],P=A[1],z=(0,p.useState)(!1),O=(0,l.Z)(z,2),W=O[0],G=O[1],H=(0,p.useState)(),K=(0,l.Z)(H,2),q=K[0],J=K[1],Q=(0,p.useState)(!1),V=(0,l.Z)(Q,2),X=V[0],Y=V[1],$=(0,p.useState)(!1),ee=(0,l.Z)($,2),te=ee[0],ne=ee[1],se=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.next=3,Z.default.getChats(t);case 3:(n=e.sent).statusCode===v.WE.Ok&&L(n.data),G(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t){var n,s,a;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.file,s=t.onSuccess,a=t.onError,ne(!0);try{J(n),s()}catch(i){a(i)}ne(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var t,n;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!q){e.next=8;break}return(t=new FormData).append("file",q),e.next=5,Z.default.uploadImage(t);case 5:if(!(n=e.sent)){e.next=8;break}return e.abrupt("return",n.data.uploadedFileUrl);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=(0,r.Z)((0,i.Z)().mark((function e(t,n){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(""),e.next=3,ie();case 3:r=e.sent,L((function(e){return[].concat((0,a.Z)(e),[(0,s.Z)((0,s.Z)({},r&&{message_type:"file",file_url:r}),{},{message:n,sent_from:U._id,__v:0,date:(new Date).toString(),_id:Math.random().toString(),isReaded:!1,sent_to:t,chatType:"Personal"})])})),r&&J(void 0),B.mySocket.emit("personalMessage",(0,s.Z)((0,s.Z)({message:n},r&&{message_type:"file",file_url:r}),{},{sent_to:t,chatType:"Personal"}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return(0,p.useEffect)((function(){b&&se(b._id)}),[b]),(0,p.useEffect)((function(){E.message&&E.sentBy.id.toString()===b._id&&L((function(e){return[].concat((0,a.Z)(e),[(0,s.Z)((0,s.Z)({},(null===E||void 0===E?void 0:E.file_url)&&{message_type:"file",file_url:E.file_url}),{},{message:null===E||void 0===E?void 0:E.message,sent_from:E.sentBy.id,__v:0,date:(new Date).toString(),_id:Math.random().toString(),isReaded:!0,sent_to:U._id,chatType:"Personal"})])}))}),[E.message]),(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"bg-[#00A038] rounded-xl py-4",children:(0,k.jsxs)("div",{className:"flex justify-between px-6",children:[(0,k.jsxs)("div",{className:"text-white flex gap-4 items-center",children:[(0,k.jsx)(d.C,{size:"large",src:null!==(t=null===b||void 0===b?void 0:b.profile)&&void 0!==t?t:(0,k.jsx)(c.Z,{})}),(0,k.jsx)("p",{className:"font-semibold",children:null===b||void 0===b?void 0:b.name})]}),(0,k.jsx)("div",{children:(0,k.jsx)(o.ZP,{onClick:function(){return C(null)},type:"primary",className:"text-white mt-2 text-base font-medium",children:"Go Back"})})]})}),(0,k.jsx)("div",{children:(0,k.jsxs)(u.Z,{spinning:te,children:[W?(0,k.jsx)(j.default,{}):(0,k.jsxs)("div",{className:"shadow-2xl dark:shadow bg-white  mt-6   dark: dark:bg-navy-900 overflow-y-auto overflow-x-hidden ",children:[(0,k.jsx)("div",{className:"flex justify-center mt-2 py-4",children:(0,k.jsx)("p",{className:"text-center text-white bg-[#00A038] px-10 rounded-2xl  ",children:(0,_.formatDate)(null===I||void 0===I||null===(n=I[0])||void 0===n?void 0:n.date)})}),(0,k.jsx)("div",{className:"overflow-y-auto max-h-[500px]",style:{minHeight:"49vh"},children:I&&I.length>0?I.map((function(e){return e.sent_from.toString()!==U._id.toString()?e.file_url?(0,k.jsx)("div",{className:"flex mb-3 px-3",children:(0,k.jsxs)("div",{className:"bg-[#00A038] p-4 rounded-xl text-white flex flex-col gap-3",children:[(0,k.jsx)(x.Z,{src:e.file_url,width:200,height:200}),(0,k.jsxs)("div",{children:[" ",e.message]}),(0,k.jsx)("div",{className:"text-end",children:(0,k.jsx)("p",{className:"text-gray-800 text-xs",children:(0,_.formatTime)(e.date)})})]})},e._id):(0,k.jsx)("div",{className:"flex mb-3 px-6",children:(0,k.jsx)("div",{className:"bg-[#00A038] px-6 py-1 rounded-xl text-white flex flex-col gap-4",children:(0,k.jsxs)("div",{children:[" ",e.message," ",(0,k.jsx)("div",{className:"text-end",children:(0,k.jsx)("p",{className:"text-gray-800 text-xs",children:(0,_.formatTime)(e.date)})})]})})},e._id):e.file_url?(0,k.jsxs)("div",{className:"flex justify-between mb-3 px-3 ",children:[(0,k.jsx)("div",{}),(0,k.jsxs)("div",{className:"bg-brandLinear text-white p-4 rounded-xl flex flex-col gap-3",children:[(0,k.jsx)(x.Z,{src:e.file_url,width:200,height:200}),(0,k.jsxs)("div",{children:[e.message,(0,k.jsx)("div",{className:"text-end",children:(0,k.jsx)("p",{className:"text-gray-800 text-xs",children:(0,_.formatTime)(e.date)})})]})]})]},e._id):(0,k.jsxs)("div",{className:"flex justify-between px-3 py-1 mb-3 ",children:[(0,k.jsx)("div",{}),(0,k.jsx)("div",{className:"text-black shadow-xl bg-brandLinear text-white px-6 rounded-xl",children:e.message&&(0,k.jsxs)(k.Fragment,{children:[e.message,(0,k.jsx)("div",{className:"text-end",children:(0,k.jsx)("p",{className:"text-gray-800 text-xs",children:(0,_.formatTime)(e.date)})})]})})]},e._id)})):(0,k.jsx)("div",{className:"text-center mt-10 text-xl  dark:text-white font-medium pb-4",children:(0,k.jsx)("p",{children:"No Chats Found"})})}),(0,k.jsx)(N.ZP,{open:X,className:"m-10",onEmojiClick:function(e){P((function(t){return t+e.emoji}))}}),q&&(0,k.jsx)(f.Z,{title:(0,k.jsxs)("div",{className:"flex justify-between align-middle",children:[(0,k.jsx)("div",{children:"Seletecd Media"})," ",(0,k.jsx)(S.FU5,{className:"border  cursor-pointer",size:"25px",onClick:function(){J(void 0)}})]}),className:"mt-5 mx-5 shadow-2xl",children:(0,k.jsx)("div",{children:(0,k.jsx)(x.Z,{src:URL.createObjectURL(q),width:100,height:100})})})]}),(0,k.jsx)(m.Z,{prefix:(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(h.Z,{id:"file",ref:M,accept:"image/*",showUploadList:!1,customRequest:ae,style:{display:"none"},multiple:!1,children:(0,k.jsx)(g.UH,{className:"cursor-pointer"})}),(0,k.jsx)(g.jMy,{onClick:function(){Y(!X)},className:"cursor-pointer"})]}),value:F,onKeyDown:function(e){"escape"===e.code.toLowerCase()&&Y(!1),"enter"!==e.code.toLowerCase()||e.shiftKey||(F||q)&&re(b._id,F)},onChange:function(e){return P(e.target.value)},placeholder:"Type here . . . . .",suffix:(0,k.jsx)(g.LbG,{onClick:function(){return(F||q)&&re(b._id,F)},className:"cursor-pointer"}),size:"large",className:"rounded-none w-full"})]})})]})})}},60493:function(e,t,n){n.r(t);var s=n(93433),a=n(74165),i=n(1413),r=n(15861),l=n(29439),c=n(29529),d=n(51678),o=n(16859),u=n(7477),x=n(72791),f=n(5796),m=n(96136),h=n(95364),v=n(51468),p=n(13189),g=n(5678),j=n(14423),w=n(80184);t.default=function(){var e=(0,x.useState)([]),t=(0,l.Z)(e,2),n=t[0],y=t[1],Z=(0,x.useState)(null),N=(0,l.Z)(Z,2),_=N[0],S=N[1],k=(0,x.useContext)(m.ChatContext).messageInfo,b=(0,x.useContext)(h.SocketContext).socket,C=(0,x.useState)(!1),U=(0,l.Z)(C,2),M=U[0],D=U[1],R=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(!0),e.next=3,v.default.getUsers();case 3:(t=e.sent).statusCode===u.WE.Ok&&y(t.data.map((function(e){return(0,i.Z)((0,i.Z)({},e),{},{isSelected:!1})}))),D(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,x.useEffect)((function(){R()}),[]),(0,x.useEffect)((function(){if(k.message){var e=n.find((function(e){return e._id.toString()===k.sentBy.id.toString()}));y((function(t){return t=e?t.map((function(e){return e._id.toString()===k.sentBy.id&&(e=(0,i.Z)((0,i.Z)({},e),{},{unReadedMessages:Number(e.unReadedMessages)+1})),e})):[].concat((0,s.Z)(t),[{__v:0,_id:k.sentBy.id,createdAt:(new Date).toString(),email:"a@gfmail.com",last_login:(new Date).toString(),name:k.sentBy.name,password:"",unReadedMessages:1,isSelected:!1,profile:"",unreadMessages:1}]),(0,s.Z)(t)}))}}),[k]),(0,x.useEffect)((function(){var e;_&&(b.mySocket.emit("startChat",{id:null===(e=b.user)||void 0===e?void 0:e._id,userId:_._id}),y((function(e){return e.map((function(e){return e._id===_._id&&(e=(0,i.Z)((0,i.Z)({},e),{},{unReadedMessages:0})),e}))})))}),[_]),(0,w.jsx)("div",{children:M?(0,w.jsx)(f.default,{}):_?_&&(0,w.jsx)(j.default,{setSelectedUser:S,selectedUser:_}):(0,w.jsx)(g.default,{sideBarChatChild:n&&(0,w.jsx)("div",{className:"py-3",children:null===n||void 0===n?void 0:n.map((function(e){var t,n;return(0,w.jsx)("div",{className:"px-2 mt-1 ",children:(0,w.jsx)("div",{className:"".concat(e.isSelected?"bg-[#00A038] rounded-2xl  text-white w-full":""," dark:text-white px-4"),children:(0,w.jsx)(d.Z,{size:"small",count:e.unReadedMessages,children:(0,w.jsxs)("div",{onClick:function(){S(e)},className:"flex cursor-pointer items-center gap-4  p-2 ",children:[(0,w.jsx)(o.C,{size:"large",src:null!==(t=null===e||void 0===e?void 0:e.profile)&&void 0!==t?t:(0,w.jsx)(c.Z,{className:"".concat(e.isSelected?"text-white":"text-[black]"," dark:text-white")})}),(0,w.jsx)("div",{className:"text-lg  ".concat(e.isSelected?"text-white":"text-black"," dark:text-white"),children:(null===(n=e.name)||void 0===n?void 0:n.length)>12?e.name.slice(0,12)+"...":e.name})]})})})},e._id)}))}),chatAreaChild:(0,w.jsx)(p.default,{})})})}},81238:function(e,t,n){function s(e){return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function a(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:200)/Math.max(e,t);return{width:Math.ceil(e*n),height:Math.ceil(t*n)}}function i(e,t){var n=new Image;n.onload=function(){var e=n.width,s=n.height;t(e,s)},n.src=e}function r(e){var t=new Date(e).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"}).split(" ");return t[4]+" "+t[5]}n.r(t),n.d(t,{formatDate:function(){return s},formatTime:function(){return r},getImageDimensions:function(){return i},scaleImageRatio:function(){return a}})}}]);
//# sourceMappingURL=1068.dd0f026f.chunk.js.map