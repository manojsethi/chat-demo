{"version":3,"file":"static/js/4423.44973b4a.chunk.js","mappings":"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","sources":["pages/dashboard/chats/personal/chatWithUser.tsx","utils/helpers.ts","../node_modules/@ant-design/icons-svg/es/asn/UserOutlined.js","../node_modules/@ant-design/icons/es/icons/UserOutlined.js"],"sourcesContent":["import { UserOutlined } from \"@ant-design/icons\";\r\nimport { Avatar, Button, Card, Image, Input, Spin, Upload } from \"antd\";\r\nimport { HttpStatusCode } from \"axios\";\r\nimport React, { useContext, useEffect, useRef, useState } from \"react\";\r\nimport { FiPaperclip, FiSend, FiSmile } from \"react-icons/fi\";\r\nimport Loader from \"../../../../components/loader\";\r\nimport { ChatContext } from \"../../../../context/chat.context\";\r\nimport { SocketContext } from \"../../../../context/socket.context\";\r\nimport { IChatData } from \"../../../../interfaces/response/chats.interface\";\r\nimport { IUsersData } from \"../../../../interfaces/response/users.Respo.interafce\";\r\nimport ChatServices from \"../../../../services/index\";\r\nimport EmojiPicker from \"emoji-picker-react\";\r\nimport { formatDate, formatTime } from \"../../../../utils/helpers\";\r\nimport appService from \"../../../../services\";\r\nimport { MdClose } from \"react-icons/md\";\r\n\r\nconst ChatWithUser = ({\r\n  selectedUser,\r\n  setSelectedUser,\r\n}: {\r\n  selectedUser: IUsersData;\r\n  setSelectedUser: (value: any) => any;\r\n}) => {\r\n  let loggedInUser = localStorage.getItem(\"loggedInUser\")\r\n    ? JSON.parse(localStorage.getItem(\"loggedInUser\")!)\r\n    : null;\r\n  const uploadRef = useRef();\r\n\r\n  const [myChats, setMyChats] = useState<IChatData[]>([]);\r\n  const { socket } = useContext(SocketContext);\r\n  const { messageInfo } = useContext(ChatContext);\r\n  const [message, setMessage] = useState<string>(\"\");\r\n  const [loader, setLoader] = useState<boolean>(false);\r\n  const [file, setFile] = useState<File>();\r\n  const [isMojiOpen, setIsMojiOpen] = useState<boolean>(false);\r\n  const [uploadingImages, setUploadingImage] = useState<boolean>(false);\r\n\r\n  const getChatsWithUser = async (userId: string) => {\r\n    setLoader(true);\r\n    let response = await ChatServices.getChats(userId);\r\n    if (response.statusCode === HttpStatusCode.Ok) setMyChats(response.data);\r\n    setLoader(false);\r\n  };\r\n  const customRequest = async ({ file, onSuccess, onError }: any) => {\r\n    setUploadingImage(true);\r\n    try {\r\n      setFile(file);\r\n      onSuccess();\r\n    } catch (error) {\r\n      onError(error);\r\n    }\r\n    setUploadingImage(false);\r\n  };\r\n  const uploadFile = async () => {\r\n    if (file) {\r\n      let formData = new FormData();\r\n      formData.append(\"file\", file);\r\n      let uploadedImage = await appService.uploadImage(formData);\r\n      if (uploadedImage) return uploadedImage.data.uploadedFileUrl;\r\n    }\r\n  };\r\n  const messageHandler = async (id: string, message: string) => {\r\n    setMessage(\"\");\r\n    let fileUrl = await uploadFile();\r\n    setMyChats((prev) => {\r\n      return [\r\n        ...prev,\r\n        {\r\n          ...(fileUrl && {\r\n            message_type: \"file\",\r\n            file_url: fileUrl,\r\n          }),\r\n          message: message,\r\n          sent_from: loggedInUser._id,\r\n          __v: 0,\r\n          date: new Date().toString(),\r\n          _id: Math.random().toString(),\r\n          isReaded: false,\r\n          sent_to: id,\r\n          chatType: \"Personal\",\r\n        },\r\n      ];\r\n    });\r\n    if (fileUrl) {\r\n      setFile(undefined);\r\n    }\r\n    socket.mySocket.emit(\"personalMessage\", {\r\n      message,\r\n      ...(fileUrl && {\r\n        message_type: \"file\",\r\n        file_url: fileUrl,\r\n      }),\r\n      sent_to: id,\r\n      chatType: \"Personal\",\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (selectedUser) getChatsWithUser(selectedUser._id);\r\n  }, [selectedUser]);\r\n  useEffect(() => {\r\n    if (\r\n      messageInfo.message &&\r\n      messageInfo.sentBy.id.toString() === selectedUser._id\r\n    )\r\n      setMyChats((prev) => {\r\n        return [\r\n          ...prev,\r\n          {\r\n            ...(messageInfo?.file_url && {\r\n              message_type: \"file\",\r\n              file_url: messageInfo.file_url,\r\n            }),\r\n            message: messageInfo?.message,\r\n            sent_from: messageInfo.sentBy.id,\r\n            __v: 0,\r\n            date: new Date().toString(),\r\n            _id: Math.random().toString(),\r\n            isReaded: true,\r\n            sent_to: loggedInUser._id,\r\n            chatType: \"Personal\",\r\n          },\r\n        ];\r\n      });\r\n  }, [messageInfo.message]);\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        <div className=\"bg-[#00A038] rounded-xl py-4\">\r\n          <div className=\"flex justify-between px-6\">\r\n            <div className=\"text-white flex gap-4 items-center\">\r\n              <Avatar\r\n                size={\"large\"}\r\n                src={selectedUser?.profile ?? <UserOutlined />}\r\n              />\r\n              <p className=\"font-semibold\">{selectedUser?.name}</p>\r\n            </div>\r\n            <div>\r\n              <Button\r\n                onClick={() => setSelectedUser(null)}\r\n                type=\"primary\"\r\n                className=\"text-white mt-2 text-base font-medium\"\r\n              >\r\n                Go Back\r\n              </Button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <Spin spinning={uploadingImages}>\r\n            {loader ? (\r\n              <Loader />\r\n            ) : (\r\n              <div className=\"shadow-2xl dark:shadow bg-white  mt-6   dark: dark:bg-navy-900 overflow-y-auto overflow-x-hidden \">\r\n                <div className=\"flex justify-center mt-2 py-4\">\r\n                  <p className=\"text-center text-white bg-[#00A038] px-10 rounded-2xl  \">\r\n                    {formatDate(myChats?.[0]?.date)}\r\n                  </p>\r\n                </div>\r\n                <div\r\n                  className=\"overflow-y-auto max-h-[500px]\"\r\n                  style={{ minHeight: \"49vh\" }}\r\n                >\r\n                  {myChats && myChats.length > 0 ? (\r\n                    myChats.map((x) => {\r\n                      let _width = 200;\r\n                      let _height = 200;\r\n\r\n                      if (\r\n                        x.sent_from.toString() !== loggedInUser._id.toString()\r\n                      )\r\n                        return x.file_url ? (\r\n                          <div key={x._id} className=\"flex mb-3 px-3\">\r\n                            <div className=\"bg-[#00A038] p-4 rounded-xl text-white flex flex-col gap-3\">\r\n                              <Image\r\n                                src={x.file_url}\r\n                                width={_width}\r\n                                height={_height}\r\n                              />\r\n                              <div> {x.message}</div>\r\n                              <div className=\"text-end\">\r\n                                <p className=\"text-gray-800 text-xs\">\r\n                                  {formatTime(x.date)}\r\n                                </p>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <div key={x._id} className=\"flex mb-3 px-6\">\r\n                            <div className=\"bg-[#00A038] px-6 py-1 rounded-xl text-white flex flex-col gap-4\">\r\n                              <div>\r\n                                {\" \"}\r\n                                {x.message}{\" \"}\r\n                                <div className=\"text-end\">\r\n                                  <p className=\"text-gray-800 text-xs\">\r\n                                    {formatTime(x.date)}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                      else\r\n                        return x.file_url ? (\r\n                          <div\r\n                            key={x._id}\r\n                            className=\"flex justify-between mb-3 px-3 \"\r\n                          >\r\n                            <div></div>\r\n                            <div className=\"bg-brandLinear text-white p-4 rounded-xl flex flex-col gap-3\">\r\n                              <Image\r\n                                src={x.file_url}\r\n                                width={_width}\r\n                                height={_height}\r\n                              />\r\n                              <div>\r\n                                {x.message}\r\n                                <div className=\"text-end\">\r\n                                  <p className=\"text-gray-800 text-xs\">\r\n                                    {formatTime(x.date)}\r\n                                  </p>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        ) : (\r\n                          <div\r\n                            key={x._id}\r\n                            className=\"flex justify-between px-3 py-1 mb-3 \"\r\n                          >\r\n                            <div></div>\r\n                            <div className=\"text-black shadow-xl bg-brandLinear text-white px-6 rounded-xl\">\r\n                              {x.message && (\r\n                                <>\r\n                                  {x.message}\r\n                                  <div className=\"text-end\">\r\n                                    <p className=\"text-gray-800 text-xs\">\r\n                                      {formatTime(x.date)}\r\n                                    </p>\r\n                                  </div>\r\n                                </>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        );\r\n                    })\r\n                  ) : (\r\n                    <div className=\"text-center mt-10 text-xl  dark:text-white font-medium pb-4\">\r\n                      <p>No Chats Found</p>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n                <EmojiPicker\r\n                  open={isMojiOpen}\r\n                  className=\"m-10\"\r\n                  onEmojiClick={(e) => {\r\n                    setMessage((prev) => (prev += e.emoji));\r\n                  }}\r\n                />\r\n                {file && (\r\n                  <Card\r\n                    title={\r\n                      <div className=\"flex justify-between align-middle\">\r\n                        <div>Seletecd Media</div>{\" \"}\r\n                        <MdClose\r\n                          className=\"border  cursor-pointer\"\r\n                          size={\"25px\"}\r\n                          onClick={() => {\r\n                            setFile(undefined);\r\n                          }}\r\n                        />\r\n                      </div>\r\n                    }\r\n                    className=\"mt-5 mx-5 shadow-2xl\"\r\n                  >\r\n                    <div>\r\n                      <Image\r\n                        src={URL.createObjectURL(file as any)}\r\n                        width={100}\r\n                        height={100}\r\n                      />\r\n                    </div>\r\n                  </Card>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <Input\r\n              prefix={\r\n                <>\r\n                  <Upload\r\n                    id=\"file\"\r\n                    ref={uploadRef}\r\n                    accept=\"image/*\"\r\n                    showUploadList={false}\r\n                    customRequest={customRequest}\r\n                    style={{ display: \"none\" }}\r\n                    multiple={false}\r\n                  >\r\n                    <FiPaperclip className=\"cursor-pointer\" />\r\n                  </Upload>\r\n                  <FiSmile\r\n                    onClick={() => {\r\n                      setIsMojiOpen(!isMojiOpen);\r\n                    }}\r\n                    className=\"cursor-pointer\"\r\n                  />\r\n                </>\r\n              }\r\n              value={message}\r\n              onKeyDown={(e) => {\r\n                if (e.code.toLowerCase() === \"escape\") setIsMojiOpen(false);\r\n                if (e.code.toLowerCase() === \"enter\" && !e.shiftKey)\r\n                  (message || file) &&\r\n                    messageHandler(selectedUser._id, message);\r\n                // if (e.shiftKey && e.code.toLowerCase() === \"enter\")\r\n                //   message && setMessage((prev) => (prev += '\\t\\t\\t\\t\\t\\t\\t\\t'));\r\n              }}\r\n              onChange={(e) => setMessage(e.target.value)}\r\n              placeholder=\"Type here . . . . .\"\r\n              suffix={\r\n                <FiSend\r\n                  onClick={() =>\r\n                    (message || file) &&\r\n                    messageHandler(selectedUser._id, message)\r\n                  }\r\n                  className=\"cursor-pointer\"\r\n                />\r\n              }\r\n              size=\"large\"\r\n              className=\"rounded-none w-full\"\r\n            />\r\n          </Spin>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChatWithUser;\r\n","export function formatDate(dateString: string): string {\n  const date = new Date(dateString);\n  const formattedDate = date.toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  });\n\n  return formattedDate;\n}\n\nexport function scaleImageRatio(\n  originalWidth: number,\n  originalHeight: number,\n  maxDimension: number = 200\n) {\n  // Calculate the scale factor based on the maximum dimension\n  const scaleFactor = maxDimension / Math.max(originalWidth, originalHeight);\n\n  // Calculate the new width and height using the scale factor\n  const newWidth = Math.ceil(originalWidth * scaleFactor);\n  const newHeight = Math.ceil(originalHeight * scaleFactor);\n\n  // Return the scaled width and height\n  return { width: newWidth, height: newHeight };\n}\nexport function getImageDimensions(imageUrl: string, callback: any) {\n  const img = new Image();\n  img.onload = function () {\n    const width = img.width;\n    const height = img.height;\n    callback(width, height);\n  };\n  // Set the image URL to trigger the onload event\n  img.src = imageUrl;\n}\n\nexport function formatTime(dateString: string) {\n  const date = new Date(dateString);\n  const options: any = {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n    hour: \"numeric\",\n    minute: \"numeric\",\n    timeZoneName: \"short\",\n  };\n  const formatedDate = date.toLocaleString(\"en-US\", options);\n  const splitedData = formatedDate.split(\" \");\n  return splitedData[4] + \" \" + splitedData[5];\n}\n","// This icon file is generated automatically.\nvar UserOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z\" } }] }, \"name\": \"user\", \"theme\": \"outlined\" };\nexport default UserOutlined;\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\n\nimport * as React from 'react';\nimport UserOutlinedSvg from \"@ant-design/icons-svg/es/asn/UserOutlined\";\nimport AntdIcon from \"../components/AntdIcon\";\nvar UserOutlined = function UserOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _extends({}, props, {\n    ref: ref,\n    icon: UserOutlinedSvg\n  }));\n};\nif (process.env.NODE_ENV !== 'production') {\n  UserOutlined.displayName = 'UserOutlined';\n}\nexport default /*#__PURE__*/React.forwardRef(UserOutlined);"],"names":["_ref","_selectedUser$profile","_myChats$","selectedUser","setSelectedUser","loggedInUser","localStorage","getItem","JSON","parse","uploadRef","useRef","_useState","useState","_useState2","_slicedToArray","myChats","setMyChats","socket","useContext","SocketContext","messageInfo","ChatContext","_useState3","_useState4","message","setMessage","_useState5","_useState6","loader","setLoader","_useState7","_useState8","file","setFile","_useState9","_useState10","isMojiOpen","setIsMojiOpen","_useState11","_useState12","uploadingImages","setUploadingImage","getChatsWithUser","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userId","response","wrap","_context","prev","next","ChatServices","getChats","sent","statusCode","HttpStatusCode","Ok","data","stop","_x","apply","arguments","customRequest","_ref4","_callee2","_ref3","onSuccess","onError","_context2","error","_x2","uploadFile","_ref5","_callee3","formData","uploadedImage","_context3","FormData","append","appService","uploadImage","abrupt","uploadedFileUrl","messageHandler","_ref6","_callee4","id","fileUrl","_context4","concat","_toConsumableArray","_objectSpread","message_type","file_url","sent_from","_id","__v","date","Date","toString","Math","random","isReaded","sent_to","chatType","undefined","mySocket","emit","_x3","_x4","useEffect","sentBy","_jsx","_Fragment","children","_jsxs","className","Avatar","size","src","profile","UserOutlined","name","Button","onClick","type","Spin","spinning","Loader","formatDate","style","minHeight","length","map","x","Image","width","height","formatTime","EmojiPicker","open","onEmojiClick","e","emoji","Card","title","MdClose","URL","createObjectURL","Input","prefix","Upload","ref","accept","showUploadList","display","multiple","FiPaperclip","FiSmile","value","onKeyDown","code","toLowerCase","shiftKey","onChange","target","placeholder","suffix","FiSend","dateString","toLocaleDateString","year","month","day","scaleImageRatio","originalWidth","originalHeight","scaleFactor","max","ceil","getImageDimensions","imageUrl","callback","img","onload","splitedData","toLocaleString","hour","minute","timeZoneName","split","props","React","AntdIcon","_extends","icon","UserOutlinedSvg"],"sourceRoot":""}