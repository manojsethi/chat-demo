"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[423],{14423:function(e,t,s){s.r(t);var n=s(93433),a=s(74165),r=s(15861),i=s(29439),c=s(29529),l=s(46379),o=s(2641),d=s(50668),u=s(7477),x=s(72791),m=s(23853),f=s(57689),h=s(65962),g=s(96136),p=s(95364),v=s(51468),j=s(80184);t.default=function(e){var t,s=e.selectedUser,w=e.setSelectedUser,y=((0,f.s0)(),localStorage.getItem("loggedInUser")?JSON.parse(localStorage.getItem("loggedInUser")):null),S=(0,x.useState)([]),_=(0,i.Z)(S,2),N=_[0],b=_[1],k=(0,x.useContext)(p.SocketContext).socket,C=(0,x.useContext)(g.ChatContext).messageInfo,Z=(0,x.useState)(""),I=(0,i.Z)(Z,2),M=I[0],T=I[1],z=(0,x.useState)(!1),A=(0,i.Z)(z,2),B=A[0],E=A[1],P=function(){var e=(0,r.Z)((0,a.Z)().mark((function e(t){var s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,v.default.getChats(t);case 3:(s=e.sent).statusCode===u.WE.Ok&&b(s.data),E(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,x.useEffect)((function(){s&&P(s._id)}),[s]),(0,x.useEffect)((function(){C.message&&C.sentBy.id.toString()===s._id&&b((function(e){return[].concat((0,n.Z)(e),[{message:C.message,sent_from:C.sentBy.id,__v:0,date:(new Date).toString(),_id:Math.random().toString(),isReaded:!0,sent_to:y._id,chatType:"Personal"}])}))}),[C.message]),(0,j.jsx)(j.Fragment,{children:(0,j.jsxs)("div",{className:"",children:[(0,j.jsx)("div",{className:"bg-[#00A038] rounded-xl py-4",children:(0,j.jsxs)("div",{className:"flex justify-between px-6",children:[(0,j.jsxs)("div",{className:"text-white flex gap-4 items-center",children:[(0,j.jsx)(l.C,{size:"large",src:null!==(t=null===s||void 0===s?void 0:s.profile)&&void 0!==t?t:(0,j.jsx)(c.Z,{})}),(0,j.jsx)("p",{className:"font-semibold",children:s.name})]}),(0,j.jsx)("div",{children:(0,j.jsx)(o.ZP,{onClick:function(){return w(null)},type:"primary",className:"text-white mt-2 text-base font-medium",children:"Go Back"})})]})}),(0,j.jsxs)("div",{children:[B?(0,j.jsx)(h.default,{}):(0,j.jsxs)("div",{className:"shadow-3xl dark:shadow bg-white  mt-6   dark: dark:bg-navy-900 overflow-y-auto overflow-x-hidden ",children:[(0,j.jsx)("div",{className:"flex justify-center mt-2 py-4",children:(0,j.jsx)("p",{className:"text-center text-white bg-[#00A038] px-10 rounded-2xl  ",children:"Today"})}),(0,j.jsx)("div",{className:"overflow-y-auto",style:{minHeight:"49vh"},children:N&&N.length>0?N.map((function(e){return e.sent_from.toString()===y._id.toString()?(0,j.jsx)("div",{className:"flex mb-3 px-3 ",children:(0,j.jsx)("div",{className:"bg-[#00A038] px-6 rounded-xl text-white",children:e.message})}):(0,j.jsxs)("div",{className:"flex justify-between px-3 mb-3 ",children:[(0,j.jsx)("div",{}),(0,j.jsx)("div",{className:"text-black shadow-3xl px-6 rounded-xl",children:e.message})]})})):(0,j.jsx)("div",{className:"text-center mt-10 text-xl  dark:text-white font-medium pb-4",children:(0,j.jsx)("p",{children:"No Chats Found"})})})]}),(0,j.jsx)(d.Z,{value:M,onChange:function(e){return T(e.target.value)},placeholder:"Type here . . . . .",suffix:(0,j.jsx)(m.LbG,{onClick:function(){return M&&function(e,t){T(""),b((function(s){return[].concat((0,n.Z)(s),[{message:t,sent_from:y._id,__v:0,date:(new Date).toString(),_id:Math.random().toString(),isReaded:!1,sent_to:e,chatType:"Personal"}])})),k.mySocket.emit("personalMessage",{message:t,sent_to:e,chatType:"Personal"})}(s._id,M)},className:"cursor-pointer"}),size:"large",className:"rounded-none w-full"})]})]})})}},29529:function(e,t,s){s.d(t,{Z:function(){return l}});var n=s(87462),a=s(72791),r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M858.5 763.6a374 374 0 00-80.6-119.5 375.63 375.63 0 00-119.5-80.6c-.4-.2-.8-.3-1.2-.5C719.5 518 760 444.7 760 362c0-137-111-248-248-248S264 225 264 362c0 82.7 40.5 156 102.8 201.1-.4.2-.8.3-1.2.5-44.8 18.9-85 46-119.5 80.6a375.63 375.63 0 00-80.6 119.5A371.7 371.7 0 00136 901.8a8 8 0 008 8.2h60c4.4 0 7.9-3.5 8-7.8 2-77.2 33-149.5 87.8-204.3 56.7-56.7 132-87.9 212.2-87.9s155.5 31.2 212.2 87.9C779 752.7 810 825 812 902.2c.1 4.4 3.6 7.8 8 7.8h60a8 8 0 008-8.2c-1-47.8-10.9-94.3-29.5-138.2zM512 534c-45.9 0-89.1-17.9-121.6-50.4S340 407.9 340 362c0-45.9 17.9-89.1 50.4-121.6S466.1 190 512 190s89.1 17.9 121.6 50.4S684 316.1 684 362c0 45.9-17.9 89.1-50.4 121.6S557.9 534 512 534z"}}]},name:"user",theme:"outlined"},i=s(54291),c=function(e,t){return a.createElement(i.Z,(0,n.Z)({},e,{ref:t,icon:r}))};var l=a.forwardRef(c)}}]);
//# sourceMappingURL=423.0f6ef4d7.chunk.js.map